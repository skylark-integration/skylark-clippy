{"version":3,"sources":["queue.js"],"names":["define","$","[object Object]","onEmptyCallback","this","_queue","_onEmptyCallback","func","push","length","_active","_progressQueue","f","shift","proxy","next"],"mappings":";;;;;;;AAAAA,QAAQ,kBAAmB,SAAUC,GACjC,aA+BA,aA7BIC,YAAYC,GACRC,KAAKC,UACLD,KAAKE,iBAAmBH,EAE5BD,MAAMK,GACFH,KAAKC,OAAOG,KAAKD,GACU,IAAvBH,KAAKC,OAAOI,QAAiBL,KAAKM,SAClCN,KAAKO,iBAGbT,iBACI,IAAKE,KAAKC,OAAOI,OAEb,YADAL,KAAKE,mBAGT,IAAIM,EAAIR,KAAKC,OAAOQ,QACpBT,KAAKM,SAAU,EAEfE,EADuBX,EAAEa,MAAMV,KAAKW,KAAMX,OAG9CF,QACIE,KAAKC,UAETH,OACIE,KAAKM,SAAU,EACfN,KAAKO","file":"../queue.js","sourcesContent":["define(['skylark-jquery'], function ($) {\n    'use strict';\n    class Queue {\n        constructor(onEmptyCallback) {\n            this._queue = [];\n            this._onEmptyCallback = onEmptyCallback;\n        }\n        queue(func) {\n            this._queue.push(func);\n            if (this._queue.length === 1 && !this._active) {\n                this._progressQueue();\n            }\n        }\n        _progressQueue() {\n            if (!this._queue.length) {\n                this._onEmptyCallback();\n                return;\n            }\n            let f = this._queue.shift();\n            this._active = true;\n            let completeFunction = $.proxy(this.next, this);\n            f(completeFunction);\n        }\n        clear() {\n            this._queue = [];\n        }\n        next() {\n            this._active = false;\n            this._progressQueue();\n        }\n    }\n\n    return Queue;\n});"]}